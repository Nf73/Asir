# نظام التنبؤ بعدد البلاغات – أمانة منطقة عسير

## فكرة المشروع
يهدف هذا المشروع إلى بناء نموذج تنبؤي يعتمد على الذكاء الاصطناعي لتقدير عدد البلاغات المتوقعة لكل بلدية تابعة لأمانة منطقة عسير، على مستوى يومي أو شهري أو سنوي.  
يساعد هذا النظام في دعم اتخاذ القرار وتحسين التخطيط التشغيلي وتوزيع الموارد بكفاءة، من خلال الاستفادة من بيانات البلاغات السابقة.

---

## مصدر البيانات
تم الاعتماد على بيانات البلاغات التاريخية من **أمانة منطقة عسير**، مع تنفيذ الخطوات التالية:
- تنظيف البيانات والتعامل مع القيم المفقودة.
- تحويل التواريخ إلى صيغة زمنية واستخراج السمات الزمنية (السنة، الشهر، اليوم).
- تجميع البيانات على مستوى يومي كقاعدة أساسية للتنبؤ، مع إمكانية جمع القيم للحصول على التوقعات الشهرية أو السنوية.

---

## منهجية النمذجة
- **المدخلات:** البلدية، السنة، الشهر، اليوم.  
- **المخرجات:** عدد البلاغات المتوقعة للفترة المطلوبة.  
- تم تدريب نموذج واحد على البيانات **اليومية**، ويتم حساب التوقعات الشهرية والسنوية بجمع التوقعات اليومية للفترة المختارة.  

### النماذج المجربة
- Random Forest Regressor

**النموذج المعتمد:** Random Forest Regressor  
**النتائج على مجموعة الاختبار:**
- **MAE** ≈ 6.27 بلاغ  
- **R²** ≈ 0.94 

---

## الهدف
- تقدير عدد البلاغات المستقبلية لكل بلدية.
- دعم التخطيط الاستباقي وتوزيع فرق العمل بناءً على حجم العمل المتوقع.
- تحسين كفاءة الاستجابة للبلاغات.

---

## الملفات الرئيسية
1. **train_model.py**  
   - تجهيز البيانات اليومية وتدريب النموذج.
   - حفظ النموذج وبيانات ترميز أسماء البلديات (`model_daily.pkl`).

2. **app_streamlit.py**  
   - واجهة تفاعلية باستخدام Streamlit.
   - اختيار البلدية والتاريخ والفترة (يومي/شهري/سنوي).
   - عرض التوقعات والتوصيات الخاصة بعدد الكادر.
   - عرض رسم بياني تفاعلي للتوزيع اليومي في حال الفترات الطويلة.

---

## طريقة التشغيل

**تثبيت الحزم المطلوبة:**
```bash
pip install -r requirements.txt
```
**تشغيل الـ API:**

```bash

python Asir_Api.py
```
**تشغيل واجهة Streamlit:**

```bash
streamlit run Asir_Streamlit.py
```

## عرض واجهة التطبيق

<img width="1901" height="954" alt="image" src="https://github.com/user-attachments/assets/e6686aa3-e294-415f-944d-fa7aaadfe5ef" />
